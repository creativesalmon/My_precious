<div class="listview" >
    <div class="lv-header">
        팀 가입자 순위
    </div>
    <div class="lv-body">
        <%cnt=UserTeam.select(:team_id).distinct.order(:team_id).count%>
        <%if cnt<5%>
            <%@aa=UserTeam.select('team_id,count(id) as count').group(:team_id).order("count desc").limit(cnt)%>
        <%else%>
            <%@aa=UserTeam.select('team_id,count(id) as count').group(:team_id).order("count desc").limit(5)%>
        <%end%>
        <%if @aa.exists?%>
            <%@deno=@aa.first.count%>
            <%@aa.all.each do |a|%>
                <%@per=a.count.fdiv(@deno)*100%>
                <div class="lv-item p-t-0">
                <div class="lv-title m-b-5 f-12"><%= Team.find(a.team_id).name%></div>
                <div class="progress">
                    <div class="progress-bar progress-bar-<%= cycle('danger','warning','success','info','')%>" role="progressbar" aria-valuenow="<%= a.count%>" aria-valuemin="0" aria-valuemax="100" data-toggle="tooltip" data-original-title="<%=a.count%>명" style="width: <%=@per%>%;">
                        <span class="sr-only"><%= a.count%> Complete (success)</span>
                    </div>
                </div>
            </div>
            <%end%>
        <%else%>
            <div class="p-15">
                          <div class="lv-item padding-fix">
                              <div class="media">
                                  <div class="pull-left">
                                      1 <i class="zmdi zmdi-star"></i>
                                  </div>
                                  
                                  <div class="pull-right">20</div>
                                  
                                  <div class="media-body">
                                      <div class="progress">
                                          <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          
                          <div class="lv-item padding-fix">
                              <div class="media">
                                  <div class="pull-left">
                                      2 <i class="zmdi zmdi-star"></i>
                                  </div>
                                  
                                  <div class="pull-right">45</div>
                                  
                                  <div class="media-body">
                                      <div class="progress">
                                          <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <div class="lv-item padding-fix">
                              <div class="media">
                                  <div class="pull-left">
                                      3 <i class="zmdi zmdi-star"></i>
                                  </div>
                                  
                                  <div class="pull-right">60</div>
                                  
                                  <div class="media-body">
                                      <div class="progress">
                                          <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <div class="lv-item padding-fix">
                              <div class="media">
                                  <div class="pull-left">
                                      4 <i class="zmdi zmdi-star"></i>
                                  </div>
                                  
                                  <div class="pull-right">78</div>
                                  
                                  <div class="media-body">
                                      <div class="progress">
                                          <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="78" aria-valuemin="0" aria-valuemax="100" style="width: 78%">
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          
                          <div class="lv-item padding-fix">
                              <div class="media">
                                  <div class="pull-left">
                                      5 <i class="zmdi zmdi-star"></i>
                                  </div>
                                  
                                  <div class="pull-right">22</div>
                                  
                                  <div class="media-body">
                                      <div class="progress">
                                          <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="22" aria-valuemin="0" aria-valuemax="100" style="width: 22%">
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
        <%end%>
        
    </div>

    <!--<a class="lv-footer" href="">View All</a>-->
</div>